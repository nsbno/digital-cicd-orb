description: >
  Sample example description.
# Provide a use-case based example for using this orb.
# Everything in the `usage` section will be displayed in the orb registry.
# Comments are not retained.
usage:
  version: 2.1
  orbs:
    digital-cicd: vydev/digital-cicd@1.0.0
  workflows:
    build-and-deploy:
      when:
        not:
          equal: [ api, << pipeline.trigger_source >> ]
      jobs:
        - digital-cicd/build:
            java-version: 17
            postgres-version: 15
        - digital-cicd/deploy:
            requires:
              - digital-cicd/build
            filters:
              branches:
                only: main

    deploy-to-test:
      when:
        equal: [ api, << pipeline.trigger_source >> ]
      jobs:
        - digital-cicd/build:
            java-version: 17
            postgres-version: 15
        - digital-cicd/deploy:
            requires:
              - digital-cicd/build
